-- TRIGGER !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

-- drop trigger trigger_for_client
-- CREATE OR REPLACE TRIGGER trigger_for_client
-- BEFORE INSERT ON client
-- FOR EACH ROW
-- DECLARE
--     count_row number;
-- BEGIN
--     SELECT COUNT(*) INTO count_row FROM client;
--     DBMS_OUTPUT.PUT_LINE('Before inser = '||count_row);
-- END;

-- insert into client values (111, 'Akerke');
-- select * from client




-- EXCEPTION !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

declare 
    product_id products.product_id%type := :id;
    category_id products.category_id%type := 1;
    product_name products.product_name%type := :product_name;
    quantity products.quntity%type := 1;
    price products.QUNTITY%type := :price;
    supplier_id products.supplier_id%type := 1;
    invalid_data exception;

begin
    if length(product_name) < 5 then
    raise invalid_data;
    else 
    insert into products (product_id, category_id, product_name, quntity, price, supplier_id) values (product_id, category_id, product_name, quantity, price, supplier_id);
    end if;

exception
    when invalid_data then 
    DBMS_OUTPUT.PUT_LINE('Invalid name entered.');
    when others then 
    DBMS_OUTPUT.PUT_LINE('Error!');
end;
